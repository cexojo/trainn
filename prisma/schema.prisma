generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model TrainingBlock {
  id          String        @id @default(uuid())
  blockNumber Int
  description String
  weeks       TrainingWeek[]
  user        User          @relation(fields: [userId], references: [id])
  userId      String
}

model TrainingWeek {
  id           String        @id @default(uuid())
  block        TrainingBlock @relation(fields: [blockId], references: [id])
  blockId      String
  weekNumber   Int
  weekStart    DateTime
  weekEnd      DateTime
  exerciseDefinitions ExerciseDefinition[]
}

model Exercise {
  id           String   @id @default(uuid())
  name         String   @unique
  group        String
  definitions  ExerciseDefinition[]
}

model User {
  id           String   @id @default(uuid())
  name         String   @unique
  trainingBlocks TrainingBlock[]
  definitions  ExerciseDefinition[]
}

model ExerciseDefinition {
  id             String    @id @default(uuid())
  user           User      @relation(fields: [userId], references: [id])
  userId         String
  day            String
  exercise       Exercise  @relation(fields: [exerciseId], references: [id])
  exerciseId     String
  seriesNumber   Int
  minReps        Int
  maxReps        Int
  minRir         Int
  maxRir         Int
  effectiveReps  Int?
  effectiveWeight Float?
  effectiveRir   Int?
  trainingWeek   TrainingWeek @relation(fields: [trainingWeekId], references: [id])
  trainingWeekId String
}
